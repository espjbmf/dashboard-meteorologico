<!DOCTYPE html>
<html lang='pt-BR'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>Estação Meteorológica - PUC Minas</title>
    <link rel='preconnect' href='https://fonts.googleapis.com'>
    <link rel='preconnect' href='https://fonts.gstatic.com' crossorigin>
    <link href='https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap' rel='stylesheet'>
    <link rel='stylesheet' href='style.css'>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
</head>
<body>
    <div class='container'>
        <header>
            <h1>Dashboard Meteorológico</h1>
            <h2 style="color: var(--secondary-color); font-weight: 300; font-size: 18px; margin: 5px 0 0 0;">
                PUC Minas - Poços de Caldas
            </h2>
        </header>
        
        <div class='card summary-card' id="card-sumario">
            <div class="card-header">
                <div class='summary-icon' id='summary-icon'>
                    <svg style="width:100%;height:100%" viewBox="0 0 24 24"></svg>
                </div>
                <h2 class='summary-text' id='summary-text'>Aguardando dados...</h2>
                <div class="card-grip-icon">
                    <svg width="24px" height="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 20L20 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M13 18L18 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M11 16L16 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </div>
            </div>
            <div class="card-content">
                <p id="summary-descricao">--</p>
            </div>
        </div>

        <main class='grid-container'>
            
            <div class='card' id="card-temp">
                <div class="card-header">
                    <div class='card-icon'><svg style="width:100%;height:100%" viewBox="0 0 24 24"><path d="M12,8A4,4 0 0,0 8,12A4,4 0 0,0 12,16A4,4 0 0,0 16,12A4,4 0 0,0 12,8M12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6A6,6 0 0,1 18,12A6,6 0 0,1 12,18M20,11H22V13H20V11M2,11H4V13H2V11M11,2V4H13V2H11M11,20V22H13V20H11Z" /></svg></div>
                    <h3>Temp. Externa</h3>
                    <p class='value' id='temp-externa-valor'>--<span> &deg;C</span></p>
                    <div class="card-grip-icon">
                        <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 20L20 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M13 18L18 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M11 16L16 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    </div>
                </div>
                <div class="card-content">
                    <p>Máxima (24h): <span id="temp-max-dia">-- &deg;C</span></p>
                    <p>Mínima (24h): <span id="temp-min-dia">-- &deg;C</span></p>
                </div>
            </div>
                        <div class='card' id="card-umidade">
                <div class="card-header">
                    <div class='card-icon'><svg style="width:100%;height:100%" viewBox="0 0 24 24"><path d="M12,20A6,6 0 0,1 6,14C6,10 12,3.25 12,3.25C12,3.25 18,10 18,14A6,6 0 0,1 12,20M12,6.5A3.5,3.5 0 0,0 8.5,10A3.5,3.5 0 0,0 12,13.5A3.5,3.5 0 0,0 15.5,10A3.5,3.5 0 0,0 12,6.5Z" /></svg></div>
                    <h3>Umidade</h3>
                    <p class='value' id='umid-valor'>--<span> %</span></p>
                    <div class="card-grip-icon">
                        <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 20L20 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M13 18L18 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M11 16L16 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    </div>
                </div>
                <div class="card-content">
                    <p>Máxima (24h): <span id="umid-max-dia">-- %</span></p>
                    <p>Mínima (24h): <span id="umid-min-dia">-- %</span></p>
                </div>
            </div>
                        <div class='card' id="card-orvalho">
                <div class="card-header">
                    <div class='card-icon'><svg style="width:100%;height:100%" viewBox="0 0 24 24"><path d="M12,16A3,3 0 0,1 9,13C9,11.63 10.25,9.2 12,5.5C13.75,9.2 15,11.63 15,13A3,3 0 0,1 12,16M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z" /></svg></div>
                    <h3>Ponto de Orvalho</h3>
                    <p class='value' id='ponto-orvalho-valor'>--<span> &deg;C</span></p>
                    <div class="card-grip-icon">
                        <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 20L20 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M13 18L18 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M11 16L16 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    </div>
                </div>
                <div class="card-content">
                    <p id="orvalho-descricao">--</p>
                </div>
            </div>
                        <div class='card' id="card-sensacao">
                <div class="card-header">
                    <div class='card-icon'><svg style="width:100%;height:100%" viewBox="0 0 24 24"><path d="M10,4.5C10,5.91 10.5,7.17 11.3,8H6V6H5V10H6V9H8.2C8.1,9.32 8,9.66 8,10A5,5 0 0,0 13,15A5,5 0 0,0 18,10C18,7.24 15.76,5 13,5C12.3,5 11.6,5.1 11,5.3V4.5A2.5,2.5 0 0,0 8.5,2A2.5,2.5 0 0,0 6,4.5H5A3.5,3.5 0 0,1 8.5,1A3.5,3.5 0 0,1 12,4.5V5.05A7,7 0 0,1 19.95,12H21V13H19.95A7,7 0 0,1 13,19.95V21H12V19.95A7,7 0 0,1 6.05,13H4V12H6.05A7,7 0 0,1 10,6.05V4.5Z" /></svg></div>
                    <h3>Sensação</h3>
                    <p class='value' id='sensacao-valor'>--<span> &deg;C</span></p>
                    <div class="card-grip-icon">
                        <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 20L20 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M13 18L18 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M11 16L16 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    </div>
                </div>
                <div class="card-content">
                    <p id="sensacao-descricao">--</p>
                </div>
            </div>
                        <div class='card' id="card-pressao">
                <div class="card-header">
                    <div class='card-icon'><svg style="width:100%;height:100%" viewBox="0 0 24 24"><path d="M16,12V4H17V2H7V4H8V12H6L12,18L18,12H16M12,14.5L9,11.5V4H15V11.5L12,14.5Z" /></svg></div>
                    <h3>Pressão</h3>
                    <p class='value' id='pressao-valor'>--<span> hPa</span></p>
                    <div class="card-grip-icon">
                        <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 20L20 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M13 18L18 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M11 16L16 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    </div>
                </div>
                <div class="card-content">
                    <p>Máxima (24h): <span id="pressao-max-dia">-- hPa</span></p>
                    <p>Mínima (24h): <span id="pressao-min-dia">-- hPa</span></p>
                </div>
            </div>

                        <div class='card' id="card-potencial">
                <div class="card-header">
                    <div class='card-icon'><svg style="width:100%;height:100%" viewBox="0 0 24 24"><path d="M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z" /></svg></div>
                    <h3>Potencial Eólico</h3>
                    <p class='value' id='potencial-eolico-valor'>--</p>
                    <div class="card-grip-icon">
                        <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 20L20 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M13 18L18 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M11 16L16 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    </div>
                </div>
                <div class="card-content">
                    <p id="potencial-descricao">--</p>
                </div>
            </div>

                        <div class='card' id="card-vento">
                <div class="card-header">
                    <div class='card-icon'><svg style="width:100%;height:100%" viewBox="0 0 24 24"><path d="M9.5,12.5L12.5,15.5L11,17L8,14M14.5,12.5L11.5,15.5L13,17L16,14M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4Z" /></svg></div>
                    <h3>Vel. Vento</h3>
                    <p class='value' id='vento-valor'>--<span> km/h</span></p>
                    <div class="card-grip-icon">
                        <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 20L20 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M13 18L18 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M11 16L16 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    </div>
                </div>
                <div class="card-content">
                    <p>Máxima (24h): <span id="vento-max-dia">-- km/h</span></p>
                </div>
            </div>

                        <div class='card' id="card-direcao">
                <div class="card-header">
                    <div class='card-icon'><svg style="width:100%;height:100%" viewBox="0 0 24 24"><path d="M12,2L4.5,20.29L5.21,21L12,18L18.79,21L19.5,20.29L12,2Z" /></svg></div>
                    <h3>Dir. Vento</h3>
                    <p class='value' id='dir-vento-valor'>--</p>
                    <div class="card-grip-icon">
                        <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 20L20 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M13 18L18 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M11 16L16 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    </div>
                </div>
                <div class="card-content">
                    <p id="direcao-descricao">Indica a direção de onde o vento está a soprar (ex: 'N' = Vento Norte).</p>
                </div>
            </div>

            <div class='card' id="card-lux">
                <div class="card-header">
                    <div class='card-icon'><svg style="width:100%;height:100%" viewBox="0 0 24 24"><path d="M12,17C9.79,17 8,14.93 8,12.5C8,10.07 9.79,8 12,8C14.21,8 16,10.07 16,12.5C16,14.93 14.21,17 12,17M12,6C7.58,6 4,12 4,12C4,12 7.58,18 12,18C16.42,18 20,12 20,12C20,12 16.42,6 12,6Z" /></svg></div>
                    <h3>Luminosidade</h3>
                    <p class='value' id='lux-valor'>--<span> lx</span></p>
                    <div class="card-grip-icon">
                        <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 20L20 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M13 18L18 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M11 16L16 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    </div>
                </div>
                <div class="card-content">
                    <p>Mede o brilho do ambiente na faixa da luz visível.</p>
                </div>
            </div>

            <div class='card' id="card-uv">
                <div class="card-header">
                    <div class='card-icon'><svg style="width:100%;height:100%" viewBox="0 0 24 24" fill="currentColor"><path d="M21 17L12 3L3 17H6L7.81 13H16.19L18 17H21ZM12 8.76L13.78 12.35H10.22L12 8.76Z"/></svg></div>
                    <h3>Índice UV</h3>
                    <p class='value' id='uv-valor'>--</p>
                    <div class="card-grip-icon">
                        <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 20L20 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M13 18L18 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M11 16L16 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    </div>
                </div>
                <div class="card-content">
                    <p>Risco de dano solar (0-11+). Medido pela intensidade dos raios UVA/UVB.</p>
                </div>
            </div>

        </main>

        <div class='card system-status-card'>
            <h2>Status do Sistema</h2>
            <div class='status-grid'>
                <div class='status-item'><h3>Temp. Interna</h3><p class='value' id='temp-interna-valor'>--<span> &deg;C</span></p></div>
                <div class='status-item'><h3>WiFi Local</h3><p class='value' id='wifi-local-status'>--</p></div>
                <div class='status-item'><h3>Sinal WiFi</h3><p class='value' id='rssi-valor'>--<span> dBm</span></p></div>
                <div class='status-item'><h3>Internet</h3><p class='value' id='internet-status'>--</p></div>
                <div class='status-item'><h3>Uptime</h3><p class='value' id='uptime-valor'>--</p></div>
                <div class='status-item'><h3>Fila Offline</h3><p class='value' id='fila-valor'>--<span> itens</span></p></div>
            </div>
        </div>
        <div class='botoes'>
            <a href='/baixar' class='botao'>Baixar CSV</a>
            <button class='botao' onclick='carregarLogDeErros()'>Relatório de Erros</button>
            <a href='/reset' class='botao botao-amarelo' onclick='return confirm("Tem certeza?");'>Reiniciar</a>
            <a href='/limpar' class='botao botao-vermelho' onclick='return confirm("Tem certeza?");'>Limpar SD</a>
        </div>
        <div id="error-log-section" style="display:none;">
            <div class='error-log-container'>
                <h2>Histórico de Erros do Sistema</h2>
                <code id='error-log-content'>Carregando...</code>
            </div>
        </div>
        <footer class='footer'><p id='data-hora'>--</p></footer>
    </div>
    <script>
        function atualizarDados() {
            fetch('/dados')
                .then(response => response.json())
                .then(data => {
                    // 1. ATUALIZA VALORES PRINCIPAIS E SUMÁRIO
                    document.getElementById('summary-text').textContent = data.condicao_texto;
                    document.getElementById('summary-icon').querySelector('svg').innerHTML = '<path d="' + data.condicao_icone + '"></path>';
                    document.getElementById('temp-externa-valor').innerHTML = data.temperatura_externa + '<span> &deg;C</span>';
                    document.getElementById('umid-valor').innerHTML = data.umidade + '<span> %</span>';
                    document.getElementById('pressao-valor').innerHTML = data.pressao + '<span> hPa</span>';
                    document.getElementById('vento-valor').innerHTML = data.velocidade_vento + '<span> km/h</span>';
                    document.getElementById('dir-vento-valor').textContent = data.direcao_vento;
                    document.getElementById('potencial-eolico-valor').textContent = classificarPotencialEolico(parseFloat(data.velocidade_vento)).texto;
                    
                    // 2. ATUALIZA VALORES EXPANDIDOS (Min/Max/Luz)
                    document.getElementById('temp-max-dia').textContent = data.temp_max_dia;
                    document.getElementById('temp-min-dia').textContent = data.temp_min_dia;
                    document.getElementById('umid-max-dia').textContent = data.umid_max_dia;
                    document.getElementById('umid-min-dia').textContent = data.umid_min_dia;
                    document.getElementById('pressao-max-dia').textContent = data.pressao_max_dia;
                    document.getElementById('pressao-min-dia').textContent = data.pressao_min_dia;
                    document.getElementById('vento-max-dia').textContent = data.vento_max_dia;
                    document.getElementById('lux-valor').textContent = data.luminosidade_lux;
                    document.getElementById('uv-valor').textContent = data.indice_uv;

                    // 3. ATUALIZA TEXTOS EXPANDIDOS
                    preencherDescricoes(data.condicao_texto, document.getElementById('potencial-eolico-valor').textContent);
                    
                    // 4. ATUALIZA O STATUS DO SISTEMA
                    document.getElementById('data-hora').textContent = 'Última atualização: ' + data.data_hora;
                    const wifiLocalElement = document.getElementById('wifi-local-status');
                    wifiLocalElement.textContent = data.wifi_local_status_str;
                    wifiLocalElement.className = data.wifi_conectado ? 'value ok' : 'value error';
                    const rssiValor = parseInt(data.wifi_rssi);
                    const rssiElement = document.getElementById('rssi-valor');
                    if (!data.wifi_conectado) {
                        rssiElement.innerHTML = '--<span> dBm</span>';
                        rssiElement.className = 'value error';
                    } else {
                        rssiElement.innerHTML = data.wifi_rssi + '<span> dBm</span>';
                        if (rssiValor >= -67) rssiElement.className = 'value ok';
                        else if (rssiValor >= -80) rssiElement.className = 'value attention';
                        else rssiElement.className = 'value error';
                    }
                    const internetElement = document.getElementById('internet-status');
                    internetElement.textContent = data.internet_status_str;
                    internetElement.className = data.internet_online ? 'value ok' : 'value error';
                    document.getElementById('uptime-valor').textContent = data.uptime;
                    const filaValor = parseInt(data.fila_status);
                    const filaElement = document.getElementById('fila-valor');
                    filaElement.innerHTML = data.fila_status + '<span> itens</span>';
                    if (filaValor === 0) { filaElement.className = 'value ok'; }
                    else { filaElement.className = 'value attention'; }
                })
                .catch(error => console.error('Erro ao buscar dados:', error));
        }
        function carregarLogDeErros() {
            var logSection = document.getElementById('error-log-section');
            var logContent = document.getElementById('error-log-content');
            if (logSection.style.display === 'none') {
                logSection.style.display = 'block';
                logContent.textContent = 'Carregando...';
                fetch('/erros')
                    .then(response => response.text())
                    .then(data => { logContent.textContent = data; })
                    .catch(error => { logContent.textContent = 'Erro ao carregar o log: ' + error; });
            } else {
                logSection.style.display = 'none';
            }
        }
        function classificarPotencialEolico(ventoKmh) {
            if (isNaN(ventoKmh)) return { texto: '--', cor: '#e1e1e1' };
            if (ventoKmh > 30) {
                return { texto: 'Forte', cor: '#f0ad4e' };
            } else if (ventoKmh > 15) {
                return { texto: 'Moderado', cor: '#28a745' };
            } else if (ventoKmh > 5) {
                return { texto: 'Branda', cor: '#00bcd4' };
            } else {
                return { texto: 'Calmo', cor: '#8a8d93' };
            }
        }
        function preencherDescricoes(sumarioTexto, potencialTexto) {
            const descPotencial = {
                'Forte': "Geração de energia significativa. Ventos acima de 30 km/h.",
                'Moderado': "Bom potencial para geração de energia. Ventos entre 15 e 30 km/h.",
                'Branda': "Potencial baixo, suficiente para pequenas turbinas. Ventos entre 5 e 15 km/h.",
                'Calmo': "Sem potencial para geração de energia. Ventos abaixo de 5 km/h.",
                '--': "Sem dados de vento para calcular."
            };
            document.getElementById('potencial-descricao').textContent = descPotencial[potencialTexto] || "--";
            document.getElementById('orvalho-descricao').textContent = "Temperatura na qual o ar fica 100% saturado e a água se condensa, formando orvalho ou neblina.";
            document.getElementById('sensacao-descricao').textContent = "Percepção da temperatura pelo corpo humano, combinando ar, umidade e vento.";
            document.getElementById('direcao-descricao').textContent = "Indica a direção de onde o vento está a soprar (ex: 'N' = Vento Norte).";
            document.getElementById('summary-descricao').textContent = sumarioTexto; 
        }
        document.addEventListener('DOMContentLoaded', () => {
            atualizarDados(); 
            setInterval(atualizarDados, 5000);

            // Lógica de expansão: 
            document.querySelectorAll('.card').forEach(card => {
                const header = card.querySelector('.card-header');
                if (header) {
                    header.addEventListener('click', () => {
                        card.classList.toggle('expanded');
                    });
                }
            });
        });
    </script>
</body>
</html>
)rawliteral";


// --- HANDLERS DO SERVIDOR ---
void handleErros() {
    if (!autenticar()) return;
    String logContent = lerLogDeErros();
    server.send(200, "text/plain", logContent);
}

void handleReset() {
    if (!autenticar()) return;
    server.send(200, "text/plain", "Dispositivo reiniciando. Aguarde um minuto e recarregue a pagina.");
    delay(1000);
    ESP.restart();
}

bool autenticar() {
    if (!server.authenticate(www_username, www_password)) {
        server.requestAuthentication();
        return false;
    }
    return true;
}

void handleRaiz() {
    if (!autenticar()) return;
    server.send_P(200, "text/html", PAGINA_HTML);
}

void handleBaixar() {
    if (!autenticar()) return;
    String dados = lerDadosSD();
    server.sendHeader("Content-Type", "text/csv");
    server.sendHeader("Content-Disposition", "attachment; filename=dados_meteorologicos.csv");
    server.send(200, "text/csv", dados);
}

void handleLimpar() {
    if (!autenticar()) return;
    if (limparSD()) {
        server.send(200, "text/plain", "Cartão SD e Fila Offline limpos com sucesso!");
    } else {
        server.send(200, "text/plain", "Erro ao limpar o Cartão SD.");
    }
}

void handleNaoEncontrado() {
    if (!autenticar()) return;
    server.send(404, "text/plain", "404: Pagina nao encontrada");
}

void iniciarServidorWeb() {
    server.on("/", handleRaiz);
    server.on("/dados", HTTP_GET, handleDadosJson);
    server.on("/baixar", handleBaixar);
    server.on("/limpar", handleLimpar);
    server.on("/reset", HTTP_GET, handleReset);
    server.on("/erros", HTTP_GET, handleErros);
    server.onNotFound(handleNaoEncontrado);
    server.begin();
    Serial.println("Servidor web iniciado com dashboard completo e final!");
}

void manipularClienteServidorWeb() {
    server.handleClient();
}
